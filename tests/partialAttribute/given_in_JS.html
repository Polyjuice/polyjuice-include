<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="../../../webcomponentsjs/webcomponents.js"></script>
    <script src="../../../web-component-tester/browser.js"></script>

    <!-- Step 1: import the element to test -->
    <link rel="import" href="../../starcounter-include.html">
  </head>
  <body>

    <starcounter-include></starcounter-include>

    <script>
var include = document.querySelector('starcounter-include');
var model = {
  Html: "../templateToInclude.html",
  doesItWork: "works!"
};
include.partial = model;
describe('before element was attached to DOM', function () {
  var createdInclude;
  beforeEach(function(){
    createdInclude = document.createElement("starcounter-include");
    createdInclude.partial = model;
  })

  it('should not attach `.Html` property as content attribute for `<imported-template>`', function () {
    expect(createdInclude.template.getAttribute("content")).to.equal.null;
  });
  it('should not attach partial model to `imported-template`', function () {
    expect(createdInclude.template.model).to.be.falsy;
  });
});
describe('after element was attached to DOM', function () {

  it('should attach `.Html` property as content attribute for `<imported-template>`', function () {
    expect(include.querySelector("template").getAttribute("content")).to.equal(model.Html);
  });
  it('should attach partial model to `imported-template`', function () {
    expect(include.querySelector("template").model).to.equal(model);
  });
});
describe('after element was detached to DOM', function () {
  var newModel = {
    Html: "../new_templateToInclude.html",
    doesItWork: "does NOT work!"
  };
  before(function(){
    //importedTemplate = include.querySelector("template")
    include.parentNode.removeChild(include);
    include.partial = newModel;
  });
  after(function(){
    document.body.appendChild(include);
    include.partial = model;
  });

  it('should not change content attribute for `<imported-template>`', function () {
    expect(include.querySelector("template").getAttribute("content")).to.equal(model.Html);
  });
  it('should not change model of `imported-template`', function () {
    expect(include.querySelector("template").model).to.equal(model);
  });
});

    </script>

  </body>
</html>
